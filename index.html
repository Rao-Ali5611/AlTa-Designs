<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>AlTa Designs ‚Äî Final</title>
<style>
  /* ====== RESET & ROOT ====== */
  :root{
    --sidebar-w: 260px;
    --gap: 18px;
    --accent: #d4af37;
    --text: #e8eef6;
    --muted: #9aa0a6;
    --card-bg: rgba(255,255,255,0.03);
    --glass: rgba(255,255,255,0.03);
    --bg-dark-1: #070708;
    --bg-dark-2: #0b0b0d;
    --main-font: "Inter", "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:var(--main-font);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
  body{color:var(--text);background:linear-gradient(180deg,var(--bg-dark-1),var(--bg-dark-2));}

  /* ====== LAYOUT: container with left column and main panel ====== */
  .container{display:flex;height:100vh;gap:var(--gap);align-items:stretch}
  .sidebar{
    width:var(--sidebar-w);min-width:var(--sidebar-w);
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-right:1px solid rgba(255,255,255,0.03);
    padding:18px;display:flex;flex-direction:column;align-items:stretch;
  }
  .sidebar .brand{display:flex;flex-direction:column;align-items:center;gap:8px;padding-bottom:8px}
  .logo-mark{width:56px;height:56px;border-radius:12px;display:grid;place-items:center;font-weight:800;font-size:18px;color:var(--accent);background:linear-gradient(135deg, rgba(212,175,55,0.12), rgba(200,140,40,0.06));border:1px solid rgba(255,255,255,0.03)}
  .brand h1{font-size:18px;margin:0;color:var(--accent);letter-spacing:0.4px}
  .brand p{margin:0;font-size:11px;color:var(--muted)}
  nav.side{margin-top:12px;display:flex;flex-direction:column;gap:6px}
  nav.side button{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;border:0;background:transparent;color:var(--muted);cursor:pointer;font-size:14px;text-align:left;transition:all .12s}
  nav.side button:hover{transform:translateX(6px);background:rgba(255,255,255,0.01)}
  nav.side button.active{color:var(--accent);background:linear-gradient(90deg, rgba(255,215,130,0.03), rgba(255,255,255,0.01));box-shadow:0 6px 18px rgba(197,155,38,0.03)}

  .spacer{flex:1}
  .sidebar footer{font-size:12px;color:var(--muted);padding-top:12px;border-top:1px solid rgba(255,255,255,0.02);text-align:center}
  .footer-admin{cursor:pointer;color:var(--muted);font-size:12px;margin-top:6px}

  /* MAIN */
  .main{
    flex:1;display:flex;flex-direction:column;padding:24px;overflow:auto;
    background:transparent;position:relative;
  }

  /* ====== HOME: heading + cloudy search + services grid ====== */
  .home-top{display:flex;flex-direction:column;align-items:center;gap:10px;margin-bottom:18px}
  .hero-title{
    font-size:48px;font-weight:900;color:var(--accent);letter-spacing:.6px;
    text-shadow:0 12px 40px rgba(0,0,0,0.6);
    line-height:1;
    transition:color .25s, text-shadow .25s;
    background-clip:text;
  }

  /* CLOUDY 3D SEARCH */
  .search-wrap{width:100%;display:flex;justify-content:center}
  .cloud-search{
    width:min(720px,60%);position:relative;border-radius:999px;padding:14px 18px;
    background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.045);backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.6), 0 2px 8px rgba(255,255,255,0.02);
  }
  .cloud-search input{position:relative;z-index:1;background:transparent;border:0;outline:none;color:var(--text);width:100%;font-size:16px;padding:6px 8px;}
  .cloud-search .voice{position:absolute;right:10px;top:50%;transform:translateY(-50%);background:transparent;border:0;color:var(--muted);font-size:18px;cursor:pointer;z-index:2}

  /* SERVICES GRID */
  .services-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;margin-top:18px}
  .svc-card{
    border-radius:14px;padding:18px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
    border:1px solid rgba(255,255,255,0.025);box-shadow:0 14px 40px rgba(0,0,0,0.6);
    display:flex;flex-direction:column;align-items:stretch;gap:12px;transition:transform .18s;
    min-height:240px; /* ensures space so button can be bottom-aligned */
  }
  .svc-card:hover{transform:translateY(-8px)}
  .svc-content{display:flex;flex-direction:column;gap:12px;flex:1}
  .svc-title{font-size:16px;font-weight:700;color:var(--svc-color, #fff);text-align:center}
  /* 3D Order Button - bottom align */
  .order-3d{
    margin-top:auto;padding:12px 22px;border-radius:999px;border:0;background:linear-gradient(180deg, var(--accent), #ffdb8f);
    color:#000;font-weight:800;cursor:pointer;box-shadow:0 18px 30px rgba(0,0,0,0.6), inset 0 -6px 10px rgba(255,255,255,0.12);
    transform-style:preserve-3d;transition:transform .18s, box-shadow .18s;
    align-self:center;
  }
  .order-3d:hover{transform:translateY(-6px) rotateX(6deg);box-shadow:0 28px 50px rgba(0,0,0,0.75), inset 0 -6px 10px rgba(255,255,255,0.14)}

  /* FULLSCREEN SERVICE CANVA-STYLE PANEL (left as-is) */
  .fs-modal{position:fixed;inset:0;display:none;justify-content:center;align-items:center;background:linear-gradient(180deg, rgba(0,0,0,0.78), rgba(0,0,0,0.9));z-index:2000;padding:18px}
  .fs-modal.show{display:flex}
  .fs-panel{width:100%;max-width:1200px;height:88vh;background:linear-gradient(180deg,#0b0b0d,#111214);border-radius:12px;overflow:hidden;display:flex;flex-direction:column}
  .fs-top{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid rgba(255,255,255,0.02)}
  .fs-title{font-size:18px;color:var(--accent);font-weight:700}
  .fs-body{flex:1;display:flex;gap:12px;padding:16px;overflow:auto}
  .fs-gallery{flex:1;display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:12px;align-content:start}
  .fs-thumb{background:#0b0b0d;border-radius:8px;overflow:hidden;border:1px solid rgba(255,255,255,0.03)}
  .fs-thumb img{width:100%;height:160px;object-fit:cover;display:block}
  .fs-side{width:360px;min-width:220px;padding:12px;border-left:1px solid rgba(255,255,255,0.02);display:flex;flex-direction:column;gap:12px}
  .fs-side .order-big{margin-top:auto;padding:12px;border-radius:12px;border:0;background:var(--accent);color:#070707;font-weight:800;cursor:pointer}
  .fs-side .order-small{display:flex;gap:8px;flex-wrap:wrap}
  .fs-upload{padding:12px;border-radius:8px;border:1px dashed rgba(255,255,255,0.03);background:transparent;color:var(--muted);text-align:center}
  .fs-upload input{display:none}

  /* ====== ORDER POPUP & BLUR (unchanged behaviour) ====== */
  .order-popup-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:3000;background:rgba(0,0,0,0.35);padding:18px;}
  .order-popup-overlay.show{display:flex}
  .order-popup{width:100%;max-width:420px;border-radius:14px;padding:20px;background:linear-gradient(180deg,#0f1113,#0b0b0d);border:1px solid rgba(255,255,255,0.04);box-shadow:0 30px 80px rgba(0,0,0,0.7), 0 6px 18px rgba(0,0,0,0.6);display:flex;flex-direction:column;gap:12px;align-items:stretch;position:relative;}
  .order-popup .title{font-size:18px;color:var(--accent);font-weight:800;text-align:center}
  .order-popup .desc{color:var(--muted);font-size:13px;text-align:center}
  .order-popup .btns{display:flex;gap:10px;justify-content:center;margin-top:6px;flex-wrap:wrap}
  .order-btn{flex:1 1 160px;padding:12px 14px;border-radius:10px;border:0;font-weight:800;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:8px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));color:var(--text);transition:transform .12s, box-shadow .12s;}
  .order-btn.whats{background:linear-gradient(180deg,#25D366,#1DA851);color:#062016}
  .order-btn.tele{background:linear-gradient(180deg,#0088cc,#0077b6);color:#e8f6ff}
  .order-popup .close-x{position:absolute;right:22px;top:18px;background:transparent;border:0;color:var(--muted);font-size:18px;cursor:pointer}
  .overlay-open .container,.overlay-open .fs-modal{filter:blur(6px) brightness(.9);pointer-events:none;user-select:none}
  .overlay-open .order-popup-overlay{pointer-events:auto}

  /* ====== NEW: Sample gallery overlay (dynamic, same-page) ====== */
  .sample-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:2800;padding:18px;background:linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.75));}
  .sample-overlay.show{display:flex}
  .sample-modal{width:100%;max-width:1000px;height:78vh;background:linear-gradient(180deg,#0b0b0d,#0f1113);border-radius:12px;padding:16px;overflow:auto;border:1px solid rgba(255,255,255,0.03);position:relative;box-shadow:0 30px 80px rgba(0,0,0,0.75)}
  .sample-modal .head{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px}
  .sample-modal .title{font-size:18px;color:var(--accent);font-weight:800}
  .sample-modal .close-sample{background:transparent;border:0;color:var(--muted);font-size:18px;cursor:pointer}
  .sample-gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:12px}
  .sample-thumb{border-radius:8px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);background:#0b0b0d;display:flex;align-items:center;justify-content:center;min-height:140px}
  .sample-thumb img{width:100%;height:160px;object-fit:cover;display:block}
  .no-samples{color:var(--muted);padding:30px;text-align:center}

  /* floating footer (unchanged) */
  .floating-footer{position:fixed;left:50%;transform:translateX(-50%) translateY(120%);bottom:18px;z-index:2500;background:linear-gradient(90deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));color:var(--muted);padding:12px 18px;border-radius:999px;border:1px solid rgba(255,255,255,0.03);display:flex;align-items:center;gap:12px;box-shadow:0 18px 40px rgba(0,0,0,0.6);opacity:0; transition:transform .8s cubic-bezier(.16,.84,.32,1),opacity .6s;}
  .floating-footer.show{transform:translateX(-50%) translateY(0);opacity:1}
  .floating-footer .hidden-link{cursor:pointer;color:var(--muted);text-decoration:underline;font-weight:700}
  .floating-footer:hover{transform:translateX(-50%) translateY(-6px);box-shadow:0 30px 70px rgba(0,0,0,0.7)}

  /* SETTINGS etc. (unchanged) */
  .settings-page{display:none}
  .settings-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
  .card-panel{background:linear-gradient(180deg,#0b0b0d,#0f1113);padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.02)}
  .swatches{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
  .swatch{width:36px;height:28px;border-radius:8px;cursor:pointer;border:2px solid rgba(255,255,255,0.03)}
  .page{display:none}
  .page.active{display:block}
  .bottom-bar{margin-top:12px;text-align:center;color:var(--muted);font-size:13px}
  .bottom-bar .hidden-link{display:inline-block;margin-left:8px;color:var(--muted);cursor:pointer;text-decoration:underline;font-size:12px}

  @media (max-width:900px){
    :root{--sidebar-w:28%}
    .sidebar{width:28%}
    .fs-side{display:none}
    .cloud-search{width:86%}
  }
  @media (max-width:560px){
    .container{flex-direction:row;}
    .sidebar{width:34%;padding:12px}
    .main{padding:12px}
    .hero-title{font-size:28px}
    .cloud-search{width:92%}
    .services-grid{grid-template-columns:1fr}
    .floating-footer{bottom:10px; padding:10px 12px}
  }
</style>
</head>
<body>
<div class="container">
  <!-- SIDEBAR (left column) -->
  <aside class="sidebar" id="sidebar">
    <div class="brand">
      <div class="logo-mark">AD</div>
      <h1 style="margin:0;font-size:16px;color:var(--accent)">AlTa Design</h1>
      <p style="margin:0;font-size:11px;color:var(--muted)">Group of Graphics</p>
    </div>

    <nav class="side" role="navigation" aria-label="Main">
      <button class="active" data-target="home">üè† Home</button>
      <button data-target="settings">‚öôÔ∏è Settings</button>
      <button data-target="projects">üìÅ My Projects</button>
      <button data-target="chat">üí¨ Client Chat</button>
      <button data-target="contact">üìû Contact</button>
      <button data-target="about">üìú About Us</button>
      <button data-target="inspiration">‚ú® Inspiration</button>
    </nav>

    <div class="spacer"></div>

    <div style="display:flex;flex-direction:column;gap:8px">
      <div class="bottom-bar">
        ¬© AlTa Group of Graphics ‚Äî <span style="font-weight:700">Rao Ali</span>
        <span class="hidden-link" id="hiddenC">c</span>
      </div>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main" id="main">
    <!-- HOME PAGE -->
    <section id="home" class="page active">
      <div class="home-top">
        <div class="hero-title" id="heroTitle">AlTa Design</div>
        <div class="search-wrap">
          <div class="cloud-search" id="cloudSearch">
            <input id="searchInput" placeholder="Search ‚Äî type or use voice..." aria-label="Search">
            <button class="voice" id="voiceBtn" title="Voice search">üé§</button>
          </div>
        </div>
      </div>

      <div class="services-grid" id="servicesGrid" role="list">
        <!-- service cards inserted by JS -->
      </div>
    </section>

    <!-- SETTINGS PAGE -->
    <section id="settings" class="page settings-page">
      <h2 style="color:var(--accent)">Settings</h2>
      <div class="settings-grid" id="settingsGrid">
        <div class="card-panel">
          <h4 style="color:var(--muted)">Theme</h4>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button onclick="setTheme('dark')">Dark</button>
            <button onclick="setTheme('light')">Light</button>
          </div>
        </div>

        <div class="card-panel">
          <h4 style="color:var(--muted)">Wallpapers (55)</h4>
          <div style="margin-top:10px;max-height:260px;overflow:auto" id="wallpapers"></div>
          <div style="display:flex;gap:8px;margin-top:10px">
            <button onclick="removeWallpaper()">Remove</button>
            <button onclick="useDefaultWallpaper()">Default</button>
          </div>
        </div>

        <div class="card-panel">
          <h4 style="color:var(--muted)">Accent Colors (55)</h4>
          <div class="swatches" id="accentSwatches"></div>
        </div>

        <div class="card-panel">
          <h4 style="color:var(--muted)">Service Title Colors (55)</h4>
          <div class="swatches" id="titleSwatches"></div>
        </div>

        <!-- admin fonts panel (if admin) -->
        <div class="card-panel admin-fonts" id="adminFontsPanel" style="display:none">
          <label for="adminFontsSelect">Fonts (242) ‚Äî change Hero & Service Titles</label>
          <select id="adminFontsSelect" size="6" style="height:140px"></select>
          <button id="applyFontBtn">Apply Font</button>
        </div>

      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects" class="page">
      <h2 style="color:var(--accent)">My Projects</h2>
      <p style="color:var(--muted)">Your uploaded projects will appear here (admin uploads).</p>
      <div id="projectsGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px;margin-top:12px"></div>
    </section>

    <!-- CLIENT CHAT -->
    <section id="chat" class="page">
      <h2 style="color:var(--accent)">Client Chat</h2>
      <div style="color:var(--muted);margin-top:8px">
        WhatsApp / Telegram: <strong>+92 303 2792947</strong><br/>
        Emails: <br/>
        muhammadaliorangzaibrao@gmail.com<br/>
        abug2572@gmail.com<br/>
        ra3275867@gmail.com<br/>
        naeemshahzad112324@gmail.com
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="page">
      <h2 style="color:var(--accent)">Contact</h2>
      <div style="color:var(--muted);margin-top:8px">
        <p>WhatsApp / Telegram: <strong>+92 303 2792947</strong></p>
        <p>Emails: see Client Chat tab</p>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="page">
      <h2 style="color:var(--accent)">About Us</h2>
      <div id="aboutContent" style="color:var(--muted);margin-top:8px;white-space:pre-wrap"></div>
      <button id="translateBtn" style="margin-top:12px;padding:8px;border-radius:8px;border:0;background:var(--accent);cursor:pointer;color:#000">Translate to Urdu</button>
    </section>

    <!-- INSPIRATION -->
    <section id="inspiration" class="page">
      <h2 style="color:var(--accent)">Inspiration</h2>
      <div id="inspirationGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px;margin-top:12px"></div>
    </section>
  </main>
</div>

<!-- Fullscreen service modal (Canva-like) - left intact -->
<div class="fs-modal" id="fsModal" aria-hidden="true">
  <div class="fs-panel" role="dialog" aria-modal="true" aria-label="Service Samples">
    <div class="fs-top">
      <div class="fs-title" id="fsTitle">Service</div>
      <div>
        <button class="fs-close" id="fsCloseBtn">‚úï Close</button>
      </div>
    </div>
    <div class="fs-body">
      <div class="fs-gallery" id="fsGallery"></div>
      <div class="fs-side">
        <div style="color:var(--muted)">Order this service</div>
        <button class="order-big" id="fsOrderBig">Order Now</button>
        <div style="color:var(--muted);margin-top:8px">Quick order</div>
        <div class="order-small">
          <button id="fsOrderWhats">WhatsApp</button>
          <button id="fsOrderTele">Telegram</button>
        </div>

        <div id="fsAdminUpload" class="fs-upload" style="display:none">
          <div style="font-size:13px;color:var(--muted)">Admin Upload ‚Äî drag & drop or click</div>
          <label style="display:block;margin-top:8px;cursor:pointer;padding:10px;border-radius:8px;background:rgba(255,255,255,0.02)">
            <input type="file" id="fsFileInput" accept="image/*" multiple> Click to choose images
          </label>
          <div style="font-size:12px;color:var(--muted);margin-top:8px">Uploaded images are stored locally (this browser).</div>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- ORDER popup (unchanged) -->
<div class="order-popup-overlay" id="orderPopupOverlay" aria-hidden="true">
  <div class="order-popup" role="dialog" aria-modal="true" aria-label="Order Options">
    <button class="close-x" id="orderPopupClose" title="Close">‚úï</button>
    <div class="title" id="orderPopupTitle">Order Service</div>
    <div class="desc" id="orderPopupDesc">Choose how you'd like to place your order.</div>
    <div class="btns">
      <button class="order-btn whats" id="orderPopupWhats">üü¢ Order on WhatsApp</button>
      <button class="order-btn tele" id="orderPopupTele">üîµ Order on Telegram</button>
    </div>
  </div>
</div>

<!-- SAMPLE overlay (new dynamic gallery for each service) -->
<div class="sample-overlay" id="sampleOverlay" aria-hidden="true">
  <div class="sample-modal" role="dialog" aria-modal="true" aria-label="Service Samples">
    <div class="head">
      <div class="title" id="sampleTitle">Samples</div>
      <button class="close-sample" id="closeSampleBtn">‚úï</button>
    </div>
    <div class="sample-gallery" id="sampleGallery"></div>
  </div>
</div>

<!-- floating footer -->
<div class="floating-footer" id="floatingFooter" aria-hidden="true">
  <div class="brandline">¬© AlTa Group of Graphics ‚Äî <strong>Rao Ali</strong></div>
  <div style="color:var(--muted);font-size:13px"> ‚Äî </div>
  <div class="hidden-link" id="hiddenCMain" title="Admin">c</div>
</div>

<script>
/* =========================
   Data & Config
   ========================= */
const ADMIN_PASSWORD = 'Ali ray555';
const PHONE = '923032792947';
const TG_LINK = 'https://t.me/+923032792947';
const LS_SAMPLES = 'alta_samples_v1';
const LS_PROJECTS = 'alta_projects_v1';
const LS_SETTINGS = 'alta_settings_v1';

/* ---------- FINAL SERVICE NAMES (display) ---------- */
const SERVICES = [
  'Wooden Logo',
  '3D Logo',
  'YouTube Thumbnails',
  'Social Media Posts',
  'Wedding Invitation Cards',
  'Packaging Design',
  'T-Shirt Design',
  'Business Cards'
];

/* utility: slugify folder name (lowercase, spaces -> -, remove unsafe chars) */
function slug(name){
  return name.toString().toLowerCase()
    .replace(/&/g,'and')
    .replace(/[\s_]+/g,'-')
    .replace(/[^a-z0-9\-]/g,'')
    .replace(/\-+/g,'-')
    .replace(/^\-+|\-+$/g,'');
}

/* Load or init samples (localStorage fallback) */
let samples = JSON.parse(localStorage.getItem(LS_SAMPLES) || 'null');
if(!samples){
  samples = {};
  SERVICES.forEach(s => samples[s] = [
    // placeholders only; when you add files to samples/<slug>/ these will be ignored
    'https://via.placeholder.com/1400x900?text='+encodeURIComponent(s+' Sample 1'),
    'https://via.placeholder.com/1400x900?text='+encodeURIComponent(s+' Sample 2')
  ]);
  localStorage.setItem(LS_SAMPLES, JSON.stringify(samples));
}

/* settings default */
let settings = JSON.parse(localStorage.getItem(LS_SETTINGS) || 'null');
if(!settings){
  settings = { theme: 'dark', accent: '#d4af37', svcTitleColor: '#ffffff', wallpaper: null, fontChoice: null };
  localStorage.setItem(LS_SETTINGS, JSON.stringify(settings));
}

/* admin state */
let isAdmin = false;
let currentService = null;

/* Apply settings */
function applySettings(){
  document.documentElement.style.setProperty('--accent', settings.accent || '#d4af37');
  document.documentElement.style.setProperty('--svc-color', settings.svcTitleColor || '#ffffff');
  if(settings.fontChoice){
    document.documentElement.style.setProperty('--main-font', settings.fontChoice);
    const hero = document.getElementById('heroTitle');
    if(hero) hero.style.fontFamily = settings.fontChoice;
    document.querySelectorAll('.svc-title').forEach(el => el.style.fontFamily = settings.fontChoice);
  }
  if(settings.wallpaper){
    document.body.style.background = settings.wallpaper;
    document.getElementById('sidebar').style.background = settings.wallpaper;
  } else {
    if(settings.theme === 'dark'){
      document.body.style.background = 'linear-gradient(180deg,#070708,#0b0b0d)';
      document.getElementById('sidebar').style.background = 'linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))';
    } else {
      document.body.style.background = 'linear-gradient(180deg,#f7f8fb,#eef6ff)';
      document.getElementById('sidebar').style.background = 'linear-gradient(180deg,#ffffff,#f1f5f9)';
      document.documentElement.style.setProperty('--muted','#475569');
      document.documentElement.style.setProperty('--text','#0b1220');
    }
  }
}

/* ========= Build services grid (cards) ========= */
const servicesGrid = document.getElementById('servicesGrid');
function buildServices(){
  servicesGrid.innerHTML = '';
  SERVICES.forEach(s => {
    const card = document.createElement('div');
    card.className = 'svc-card';
    card.tabIndex = 0;

    // card inner structure: content + order button pushed to bottom
    const inner = document.createElement('div');
    inner.className = 'svc-content';
    inner.innerHTML = `<div class="svc-title" data-service="${s}">${s}</div>
                       <div style="color:var(--muted);font-size:13px">High-quality ${s} by AlTa Designs</div>`;

    const btn = document.createElement('button');
    btn.className = 'order-3d';
    btn.dataset.service = s;
    btn.textContent = 'Order Now';

    // click on card content (title or content) opens sample gallery modal
    inner.addEventListener('click', (e)=>{
      if(e.target.closest('button')) return;
      openSampleModal(s);
    });

    // order button opens the order popup (unchanged behavior)
    btn.addEventListener('click', (ev)=>{
      ev.stopPropagation();
      showOrderPopup(s);
    });

    card.appendChild(inner);
    card.appendChild(btn);
    servicesGrid.appendChild(card);
  });
}

/* =========================
   Fullscreen fsModal (kept intact)
   ========================= */
const fsModal = document.getElementById('fsModal');
const fsGallery = document.getElementById('fsGallery');
const fsTitle = document.getElementById('fsTitle');
const fsAdminUpload = document.getElementById('fsAdminUpload');
const fsFileInput = document.getElementById('fsFileInput');

function openFs(service){
  currentService = service;
  fsTitle.textContent = service;
  renderGallery(service);
  fsAdminUpload.style.display = isAdmin ? 'block' : 'none';
  fsModal.classList.add('show');
  fsModal.setAttribute('aria-hidden','false');
}
function renderGallery(service){
  fsGallery.innerHTML = '';
  const arr = samples[service] || [];
  if(arr.length === 0){ fsGallery.innerHTML = '<div style="padding:12px;color:var(--muted)">No samples yet.</div>'; return; }
  arr.forEach(url=>{
    const d = document.createElement('div'); d.className = 'fs-thumb';
    d.innerHTML = `<img src="${url}" alt="${service} sample">`;
    d.addEventListener('click', ()=> window.open(url,'_blank'));
    fsGallery.appendChild(d);
  });
}
document.getElementById('fsCloseBtn').addEventListener('click', ()=> closeFs());
function closeFs(){ fsModal.classList.remove('show'); fsModal.setAttribute('aria-hidden','true'); currentService = null; }

/* Orders inside fs modal (unchanged) */
document.getElementById('fsOrderWhats').addEventListener('click', ()=>{
  if(!currentService) return;
  window.open('https://wa.me/'+PHONE+'?text='+encodeURIComponent('I want to order: '+currentService),'_blank');
});
document.getElementById('fsOrderTele').addEventListener('click', ()=> {
  if(!currentService) return;
  window.open(TG_LINK,'_blank');
});
document.getElementById('fsOrderBig').addEventListener('click', ()=>{
  if(!currentService) return;
  const ok = confirm('Order on WhatsApp (OK) or Telegram (Cancel)?');
  if(ok) window.open('https://wa.me/'+PHONE+'?text='+encodeURIComponent('I want to order: '+currentService),'_blank');
  else window.open(TG_LINK,'_blank');
});

/* =========================
   ORDER popup behavior (unchanged)
   ========================= */
const orderOverlay = document.getElementById('orderPopupOverlay');
const orderPopupTitle = document.getElementById('orderPopupTitle');
const orderPopupDesc = document.getElementById('orderPopupDesc');
const orderPopupWhats = document.getElementById('orderPopupWhats');
const orderPopupTele = document.getElementById('orderPopupTele');
const orderPopupClose = document.getElementById('orderPopupClose');

function showOrderPopup(service){
  currentService = service;
  orderPopupTitle.textContent = `Order: ${service}`;
  orderPopupDesc.textContent = `Place your order directly with us via WhatsApp or Telegram.`;
  orderOverlay.classList.add('show');
  orderOverlay.setAttribute('aria-hidden','false');
  document.body.classList.add('overlay-open');
}
function closeOrderPopup(){
  orderOverlay.classList.remove('show'); orderOverlay.setAttribute('aria-hidden','true');
  document.body.classList.remove('overlay-open'); currentService = null;
}
orderPopupWhats.addEventListener('click', ()=>{
  if(!currentService) return;
  const wa = 'https://wa.me/'+PHONE+'?text='+encodeURIComponent('I want to order: '+currentService);
  window.open(wa,'_blank'); closeOrderPopup();
});
orderPopupTele.addEventListener('click', ()=>{
  if(!currentService) return;
  window.open(TG_LINK,'_blank'); closeOrderPopup();
});
orderPopupClose.addEventListener('click', ()=> closeOrderPopup());
orderOverlay.addEventListener('click', (e)=>{ if(e.target === orderOverlay) closeOrderPopup(); });

/* =========================
   NEW: Sample modal (dynamic gallery, same-page)
   ========================= */
const sampleOverlay = document.getElementById('sampleOverlay');
const sampleGallery = document.getElementById('sampleGallery');
const sampleTitle = document.getElementById('sampleTitle');
const closeSampleBtn = document.getElementById('closeSampleBtn');

/* Attempt to load sample images from samples/<slug>/(1..6).(jpg|png) */
function loadSamplesFor(service){
  return new Promise((resolve)=> {
    const found = [];
    const folder = `samples/${slug(service)}/`; // slugified folder
    const maxTry = 6;
    let totalToTry = maxTry * 2; // jpg + png per index
    let finished = 0;

    for(let i=1;i<=maxTry;i++){
      ['jpg','png'].forEach(ext=>{
        const url = folder + i + '.' + ext;
        const img = new Image();
        img.onload = ()=>{
          found.push(url);
          finished++;
          if(finished === totalToTry) resolve(found);
        };
        img.onerror = ()=>{
          finished++;
          if(finished === totalToTry) resolve(found);
        };
        img.src = url;
      });
    }
    // safety timeout
    setTimeout(()=>{ if(found.length || finished === totalToTry) resolve(found); }, 1200);
  });
}

async function openSampleModal(service){
  currentService = service;
  sampleTitle.textContent = `Samples ‚Äî ${service}`;
  sampleGallery.innerHTML = '<div class="no-samples">Loading samples‚Ä¶</div>';
  sampleOverlay.classList.add('show');
  sampleOverlay.setAttribute('aria-hidden','false');
  document.body.classList.add('overlay-open');

  const files = await loadSamplesFor(service);
  sampleGallery.innerHTML = '';
  if(files.length === 0){
    // fallback to localStorage samples array
    const arr = samples[service] || [];
    if(arr && arr.length){
      arr.forEach(url=>{
        const d = document.createElement('div'); d.className = 'sample-thumb';
        d.innerHTML = `<img src="${url}" alt="${service} sample">`;
        sampleGallery.appendChild(d);
      });
    } else {
      sampleGallery.innerHTML = `<div class="no-samples">No samples found for this service. Add images to <code>samples/${slug(service)}</code> or upload via admin.</div>`;
    }
  } else {
    files.forEach(url=>{
      const d = document.createElement('div'); d.className = 'sample-thumb';
      d.innerHTML = `<img src="${url}" alt="${service} sample">`;
      d.addEventListener('click', ()=> window.open(url,'_blank'));
      sampleGallery.appendChild(d);
    });
  }
}

function closeSampleModal(){
  sampleOverlay.classList.remove('show');
  sampleOverlay.setAttribute('aria-hidden','true');
  document.body.classList.remove('overlay-open');
  sampleGallery.innerHTML = '';
  currentService = null;
}
closeSampleBtn.addEventListener('click', ()=> closeSampleModal());
sampleOverlay.addEventListener('click', (e)=>{ if(e.target === sampleOverlay) closeSampleModal(); });

/* admin upload handlers for fsModal */
fsFileInput.addEventListener('change', ()=>{
  const files = Array.from(fsFileInput.files || []);
  if(files.length) uploadFiles(files, currentService);
  fsFileInput.value = '';
});
fsGallery.addEventListener('dragover', e=>{ e.preventDefault(); fsGallery.style.outline='2px dashed rgba(255,255,255,0.06)';});
fsGallery.addEventListener('dragleave', e=>{ fsGallery.style.outline='none';});
fsGallery.addEventListener('drop', e=>{ e.preventDefault(); fsGallery.style.outline='none'; if(!isAdmin){ alert('Admin only upload'); return;} const files=Array.from(e.dataTransfer.files||[]); uploadFiles(files,currentService); });

function uploadFiles(files, svc){
  const imgs = files.filter(f => f.type && f.type.startsWith('image/'));
  if(imgs.length===0){ alert('Images only'); return; }
  let done=0;
  imgs.forEach(file=>{
    const reader = new FileReader();
    reader.onload = ev=>{
      samples[svc] = samples[svc] || [];
      samples[svc].unshift(ev.target.result);
      localStorage.setItem(LS_SAMPLES, JSON.stringify(samples));
      done++;
      if(done===imgs.length){
        renderGallery(svc);
        buildProjects(); alert('Uploaded to '+svc);
      }
    };
    reader.readAsDataURL(file);
  });
}

/* ========== Settings: wallpapers/colors ========== */
const wallpapersEl = document.getElementById('wallpapers');
const accentSwatches = document.getElementById('accentSwatches');
const titleSwatches = document.getElementById('titleSwatches');

const genWallpapers = [];
for(let i=0;i<55;i++){
  const h1 = Math.floor((i*47)%360);
  const h2 = (h1 + 40) % 360;
  const light = (i%2===0);
  const g = light ?
    `linear-gradient(135deg, hsl(${h1} 60% 95%), hsl(${h2} 60% 90%))` :
    `linear-gradient(135deg, hsl(${h1} 30% 12%), hsl(${h2} 30% 18%))`;
  genWallpapers.push(g);
}
genWallpapers.forEach((w,i)=>{
  const d = document.createElement('div');
  d.style.height='64px'; d.style.borderRadius='8px'; d.style.margin='6px'; d.style.cursor='pointer';
  d.style.background = w; d.title = 'Wallpaper '+(i+1);
  d.addEventListener('click', ()=> { setWallpaper(w); });
  wallpapersEl && wallpapersEl.appendChild(d);
});

const genColors = [];
for(let i=0;i<55;i++){
  const hue = Math.round((i*360/55));
  genColors.push(`hsl(${hue} 70% 50%)`);
}
genColors.forEach(c=>{
  const s = document.createElement('div'); s.className='swatch'; s.style.background=c; s.title=c;
  s.addEventListener('click', ()=> setAccent(c));
  accentSwatches && accentSwatches.appendChild(s);
});
genColors.forEach(c=>{
  const s = document.createElement('div'); s.className='swatch'; s.style.background=c; s.title=c;
  s.addEventListener('click', ()=> setSvcTitleColor(c));
  titleSwatches && titleSwatches.appendChild(s);
});

function setWallpaper(w){ settings.wallpaper = w; localStorage.setItem(LS_SETTINGS, JSON.stringify(settings)); applySettings(); }
function removeWallpaper(){ settings.wallpaper=null; localStorage.setItem(LS_SETTINGS, JSON.stringify(settings)); applySettings(); }
function useDefaultWallpaper(){ settings.wallpaper=null; applySettings(); }
function setAccent(c){ settings.accent=c; localStorage.setItem(LS_SETTINGS, JSON.stringify(settings)); applySettings(); }
function setSvcTitleColor(c){ settings.svcTitleColor=c; localStorage.setItem(LS_SETTINGS, JSON.stringify(settings)); applySettings(); }
function setTheme(t){ settings.theme = t; localStorage.setItem(LS_SETTINGS, JSON.stringify(settings)); applySettings(); }

/* ========== Sidebar nav ========== */
document.querySelectorAll('nav.side button').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    document.querySelectorAll('nav.side button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    const target = btn.dataset.target;
    showPage(target);
  });
});
function showPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  const el = document.getElementById(id);
  if(el) el.classList.add('active');
  if(id==='settings'){ document.getElementById('settings').classList.add('active'); } else { document.getElementById('settings').classList.remove('active'); }
  document.getElementById('main').scrollTop = 0;
  closeFs();
}

/* ========== Admin hidden 'c' handler (both places) ========== */
function handleAdminClick(){
  const p = prompt('Enter admin password:');
  if(p === ADMIN_PASSWORD){
    isAdmin = true;
    alert('Admin ON');
    document.getElementById('fsAdminUpload').style.display='block';
    document.getElementById('adminFontsPanel').style.display='block';
    populateFontsIfNeeded();
  } else alert('Wrong password');
}
document.getElementById('hiddenC').addEventListener('click', handleAdminClick);
document.getElementById('hiddenCMain').addEventListener('click', handleAdminClick);

/* About content */
const aboutEng = `AlTa Designs is a distinguished graphic design studio led by Rao Ali. With years of practical experience in branding and visual communication, we deliver premium design solutions tailored for businesses and creators. Our services range from three-dimensional logo creation, wooden logo concepts, t-shirt designs, social media graphics, packaging layouts, marriage invitation cards, business card designs, to attention-grabbing YouTube thumbnails.

Our process is collaborative and professional: we listen to your needs, present multiple concept samples, and refine designs with prompt revisions until the final artwork perfectly matches your brand's identity. We prioritize quality, clarity, and originality in every project, ensuring that each visual asset increases audience engagement and presents your brand with authenticity.

Clients who work with AlTa Designs experience:
- Fast and clear communication
- Multiple concept samples for each order
- Smooth revision rounds and delivery in preferred formats (PNG, JPG, PDF, source files)
- Dedicated support through WhatsApp, Telegram, and Email

We are proud to support Pakistan's creative economy by helping individuals and businesses present their best visual selves. With a strong focus on strategy and aesthetics, AlTa Designs aims to make Pakistani design talent known across the world. Trust, quality, and creativity form the pillars of our studio.`;
const aboutUrdu = `AlTa Designs ÿß€å⁄© ŸÖŸÖÿ™ÿßÿ≤ ⁄Øÿ±ÿßŸÅ⁄© ⁄à€åÿ≤ÿßÿ¶ŸÜ ÿßÿ≥ŸπŸà⁄à€åŸà €Å€í ÿ¨ÿ≥ ⁄©€å ŸÇ€åÿßÿØÿ™ ÿ±ÿßÿ§ ÿπŸÑ€å ⁄©ÿ± ÿ±€Å€í €Å€å⁄∫€î Ÿàÿ≥€åÿπ ÿ™ÿ¨ÿ±ÿ®€í ⁄©€í ÿ≥ÿßÿ™⁄æÿå €ÅŸÖ ÿ®ÿ±ÿßŸÜ⁄àŸÜ⁄Ø ÿßŸàÿ± ÿ®ÿµÿ±€å ŸÖŸàÿßÿµŸÑÿßÿ™ ⁄©€í ŸÑ€å€í Ÿæÿ±€åŸÖ€åŸÖ ⁄à€åÿ≤ÿßÿ¶ŸÜ ÿ≠ŸÑ ŸÅÿ±ÿß€ÅŸÖ ⁄©ÿ±ÿ™€í €Å€å⁄∫€î €ÅŸÖÿßÿ±€å ÿÆÿØŸÖÿßÿ™ ŸÖ€å⁄∫ ÿ™⁄æÿ±€å ⁄àÿßÿ¶ŸÖ€åŸÜÿ¥ŸÜŸÑ ŸÑŸà⁄ØŸàÿå ŸàŸà⁄àŸÜ ŸÑŸà⁄ØŸà ÿ™ÿµŸàÿ±ÿßÿ™ÿå Ÿπ€å ÿ¥ÿ±Ÿπ ⁄à€åÿ≤ÿßÿ¶ŸÜÿå ÿ≥Ÿàÿ¥ŸÑ ŸÖ€å⁄à€åÿß ⁄Øÿ±ÿßŸÅ⁄©ÿ≥ÿå Ÿæ€å⁄©€åÿ¨ŸÜ⁄Ø ŸÑ€í ÿ¢ÿ§Ÿπÿ≥ÿå ÿ¥ÿßÿØ€å ⁄©€í ÿØÿπŸàÿ™ ŸÜÿßŸÖ€íÿå ÿ®ÿ≤ŸÜÿ≥ ⁄©ÿßÿ±⁄à ⁄à€åÿ≤ÿßÿ¶ŸÜ ÿßŸàÿ± ÿØŸÑ ⁄©⁄æ€åŸÜ⁄ÜŸÜ€í ŸàÿßŸÑ€å €åŸàŸπ€åŸàÿ® ÿ™⁄æŸÖÿ® ŸÜ€åŸÑ ÿ¥ÿßŸÖŸÑ €Å€å⁄∫€î`;
document.getElementById('aboutContent').textContent = aboutEng;
let isUrdu = false;
document.getElementById('translateBtn').addEventListener('click', ()=>{
  if(!isUrdu){ document.getElementById('aboutContent').textContent = aboutUrdu; document.getElementById('translateBtn').textContent='Translate to English'; isUrdu=true; }
  else { document.getElementById('aboutContent').textContent = aboutEng; document.getElementById('translateBtn').textContent='Translate to Urdu'; isUrdu=false; }
});

/* Search & voice */
const searchInput = document.getElementById('searchInput');
searchInput.addEventListener('input', ()=> {
  const q = (searchInput.value||'').toLowerCase().trim();
  document.querySelectorAll('.svc-card').forEach(card=>{
    const txt = card.querySelector('.svc-title').textContent.toLowerCase();
    card.style.display = (!q || txt.includes(q)) ? 'flex' : 'none';
  });
});
document.getElementById('voiceBtn').addEventListener('click', ()=>{
  if(!('SpeechRecognition' in window) && !('webkitSpeechRecognition' in window)){ alert('Voice search not supported'); return; }
  const Rec = window.SpeechRecognition || window.webkitSpeechRecognition;
  const r = new Rec(); r.lang='en-US'; r.interimResults=false; r.maxAlternatives=1; r.start();
  r.onresult = (e)=> { searchInput.value = e.results[0][0].transcript; searchInput.dispatchEvent(new Event('input')); };
  r.onend = ()=>{};
});

/* Projects grid builder */
function buildProjects(){
  const projGrid = document.getElementById('projectsGrid');
  projGrid.innerHTML = '';
  const projects = JSON.parse(localStorage.getItem(LS_PROJECTS) || '[]');
  projects.forEach((p,i)=>{
    const d = document.createElement('div'); d.className='svc-card'; d.style.minHeight='120px';
    d.innerHTML = `<div style="font-weight:700">${p.name || 'Project '+(i+1)}</div><div style="color:var(--muted);margin-top:6px">${p.desc || ''}</div>`;
    projGrid.appendChild(d);
  });
}

/* Floating footer show */
const floatingFooter = document.getElementById('floatingFooter');
setTimeout(()=>{ floatingFooter.classList.add('show'); floatingFooter.setAttribute('aria-hidden','false'); }, 600);

/* Fonts admin panel (basic populate) */
const adminFontsSelect = document.getElementById('adminFontsSelect');
let fontsPopulated = false;
function populateFontsIfNeeded(){
  if(fontsPopulated) return;
  fontsPopulated = true;
  const common = [
    {label:'Inter (system)', value:'Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial'},
    {label:'Poppins', value:'Poppins, system-ui, -apple-system, "Segoe UI", Roboto, Arial'},
    {label:'Roboto', value:'Roboto, system-ui, -apple-system, "Segoe UI", Arial'},
    {label:'Arial', value:'Arial, Helvetica, sans-serif'},
    {label:'Georgia', value:'Georgia, "Times New Roman", Times, serif'}
  ];
  common.forEach(c=> {
    const opt = document.createElement('option');
    opt.value = c.value;
    opt.textContent = c.label;
    adminFontsSelect.appendChild(opt);
  });
  for(let i=6;i<=242;i++){
    const opt = document.createElement('option'); opt.value = `var(--main-font)`; opt.textContent = `Font ${i}`;
    adminFontsSelect.appendChild(opt);
  }
  if(settings.fontChoice){
    let found = false;
    for(const opt of adminFontsSelect.options){
      if(opt.value === settings.fontChoice){ opt.selected = true; found = true; break; }
    }
    if(!found){
      const opt = document.createElement('option'); opt.value = settings.fontChoice; opt.textContent = `Custom: ${settings.fontChoice}`;
      adminFontsSelect.insertBefore(opt, adminFontsSelect.firstChild);
      opt.selected = true;
    }
  }
}
document.getElementById('applyFontBtn')?.addEventListener('click', ()=>{
  const v = adminFontsSelect.value || '';
  if(!v) return alert('Select a font first');
  settings.fontChoice = v;
  localStorage.setItem(LS_SETTINGS, JSON.stringify(settings));
  applySettings();
  alert('Font applied to Hero & Service titles.');
});

/* Init */
applySettings();
buildServices();
buildProjects();
renderGallery(SERVICES[0]);
showPage('home');

/* Close handlers */
document.addEventListener('keydown', e=> {
  if(e.key==='Escape'){ if(sampleOverlay.classList.contains('show')) closeSampleModal(); if(orderOverlay.classList.contains('show')) closeOrderPopup(); if(fsModal.classList.contains('show')) closeFs(); }
});
document.querySelector('.fs-modal').addEventListener('click', e=> { if(e.target === document.querySelector('.fs-modal')) closeFs(); });

/* Save settings on unload */
window.addEventListener('beforeunload', ()=> localStorage.setItem(LS_SETTINGS, JSON.stringify(settings)));
</script>
</body>
</html>
